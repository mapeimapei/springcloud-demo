{"version":3,"sources":["webpack:///src/views/petStore/products.vue","webpack:///./src/views/petStore/products.vue","webpack:///./src/views/petStore/products.vue?b559"],"names":["products","name","data","productList","currentPage","pageSize","computed","extends_default","Object","vuex_esm","productList2","start","this","end","slice","methods","makeOrderFn","row","_this","obj","userid","user","user_id","fast","loadingMask","$loading","lock","background","$axios","post","stringify_default","then","close","resultCode","$notify","message","type","$router","push","path","query","orderid","result","catch","err","addShoppingCart","_this2","productid","quantity","console","log","getProducts","_this3","get","forEach","item","index","mounted","created","__vue_styles__","context","__webpack_require__","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","border","label","width","scopedSlots","_u","key","fn","scope","src","$ut","srcUrl","image","sizes","_v","prop","min","size","model","value","callback","$$v","$set","expression","on","click","$event","current-page","page-size","layout","total","length","update:currentPage","update:current-page","__webpack_exports__"],"mappings":"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","file":"vue/js/0.1cb6b649eda067aa7596.js","sourcesContent":["<template>\r\n\t<div class=\"articleBox fx-f1\">\r\n\t\t<el-table\r\n      class=\"articleList\"\r\n      :data=\"productList2\"\r\n      border>\r\n\t\t<el-table-column\r\n      label=\"图片\"\r\n      width=\"72\">\r\n      <template slot-scope=\"scope\">\r\n        <div class=\"productIcon\"><img :src=\"$ut.srcUrl + scope.row.image\" sizes=\"48\" /></div>\r\n      </template>\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      prop=\"cname\"\r\n      label=\"名称\">\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      prop=\"category\"\r\n      label=\"分类\">\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      prop=\"listprice\"\r\n      label=\"单价(￥)\">\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      prop=\"descn\"\r\n      label=\"描述\">\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      label=\"数量\">\r\n      <template slot-scope=\"scope\">\r\n        <el-input-number :min=\"1\" v-model=\"scope.row.quantity\"  size=\"small\" label=\"描述文字\"></el-input-number>\r\n      </template>\r\n    </el-table-column>\r\n\t\t<el-table-column\r\n      label=\"操作\">\r\n      <template slot-scope=\"scope\">\r\n        <el-button type=\"text\" @click=\"makeOrderFn(scope.row)\">直接购买</el-button>\r\n        <el-button type=\"text\" @click=\"addShoppingCart(scope.row)\">加入购物车</el-button>\r\n      </template>\r\n    </el-table-column>\r\n\r\n\r\n  </el-table>\r\n\r\n\r\n  <el-pagination\r\n  \t:current-page.sync=\"currentPage\"\r\n  \t:page-size=\"pageSize\"\r\n  \tlayout=\"total, prev, pager, next\"\r\n  \t:total=\"productList.length\">\r\n  </el-pagination>\r\n\r\n\r\n\t</div>\r\n</template>\r\n<script>\r\n\r\n\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name:\"products\",\r\n  data () {\r\n    return {\r\n      productList:[],\r\n      currentPage:1,\r\n      pageSize:5,\r\n      // productList2:[],\r\n    }\r\n  },\r\n\r\n  computed:{\r\n    ...mapState(\r\n          ['user']\r\n     ),\r\n\r\n     //分页\r\n    productList2(){\r\n      let start = (this.currentPage-1)*this.pageSize\r\n      let end =this.currentPage*this.pageSize\r\n      return this.productList.slice(start,end)\r\n    },\r\n\r\n\r\n  },\r\n\r\n  methods:{\r\n\r\n    makeOrderFn(row){\r\n      let obj = {\r\n        \"userid\":this.user.user_id,\r\n        \"productList\":[row],\r\n        \"fast\":\"1\"\r\n      }\r\n\r\n      let apiUrl = \"shop/order/addOrder\"\r\n      let loadingMask = this.$loading({\r\n        lock: true,\r\n        background: 'rgba(0, 0, 0, 0.5)'\r\n      });\r\n      this.$axios.post(apiUrl, JSON.stringify(obj)).then((data) => {\r\n        loadingMask.close();\r\n        if(!!data && data.resultCode ===\"20000\"){\r\n          this.$notify({\r\n            message: '订单生成成功。',\r\n            type: 'success'\r\n          })\r\n          this.$router.push({path: 'ordersDetails', query:{orderid: data.result.orderid}})\r\n        }else{\r\n          this.$notify({\r\n            message: '订单生成失败。',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      }).catch((err) => {\r\n        loadingMask.close();\r\n        this.$notify({\r\n          message: '订单生成接口报错。',\r\n          type: 'warning'\r\n        });\r\n      });\r\n    },\r\n\r\n\r\n\r\n    //加入购物车\r\n    addShoppingCart(row){\r\n      let obj = {\r\n        \"productid\":row.productid,\r\n        \"quantity\":row.quantity,\r\n        \"userid\":this.user.user_id\r\n      }\r\n      console.log(obj)\r\n      let apiUrl = \"shop/cart/addCart\"\r\n      let loadingMask = this.$loading({\r\n        lock: true,\r\n        background: 'rgba(0, 0, 0, 0.5)'\r\n      });\r\n      this.$axios.post(apiUrl, JSON.stringify(obj)).then((data) => {\r\n        loadingMask.close();\r\n        if(!!data && data.resultCode ===\"20000\"){\r\n          this.$notify({\r\n            message: '添加成功。',\r\n            type: 'success'\r\n          })\r\n        }else{\r\n          this.$notify({\r\n            message: '添加失败。',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      }).catch((err) => {\r\n        loadingMask.close();\r\n        this.$notify({\r\n          message: '添加接口报错。',\r\n          type: 'warning'\r\n        });\r\n      });\r\n\r\n\r\n    },\r\n\r\n    //获取商品列表信息\r\n    getProducts(){\r\n      let apiUrl = \"shop/products\"\r\n      let loadingMask = this.$loading({\r\n        lock: true,\r\n        background: 'rgba(0, 0, 0, 0.5)'\r\n      });\r\n      this.$axios.get(apiUrl).then((data) => {\r\n        loadingMask.close();\r\n        if(!!data && data.resultCode ===\"20000\"){\r\n            data.result.forEach((item,index)=>{\r\n              //item.image = item.image.replace(/\\./, \"_\")\r\n              item.quantity = 1\r\n            })\r\n            this.productList = data.result\r\n        }else{\r\n          this.$notify({\r\n            message: '获取商品列表失败。',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      }).catch((err) => {\r\n        loadingMask.close();\r\n        this.$notify({\r\n          message: '获取商品表接口报错。',\r\n          type: 'warning'\r\n        });\r\n      });\r\n    },\r\n\r\n  },\r\n\r\n  mounted(){\r\n\r\n  },\r\n\r\n  created(){\r\n    this.getProducts()\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/petStore/products.vue","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7788ce65\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=styles&index=0!./products.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./products.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./products.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7788ce65\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./products.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7788ce65\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/petStore/products.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"articleBox fx-f1\"},[_c('el-table',{staticClass:\"articleList\",attrs:{\"data\":_vm.productList2,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"图片\",\"width\":\"72\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"productIcon\"},[_c('img',{attrs:{\"src\":_vm.$ut.srcUrl + scope.row.image,\"sizes\":\"48\"}})])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cname\",\"label\":\"名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"category\",\"label\":\"分类\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"listprice\",\"label\":\"单价(￥)\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"descn\",\"label\":\"描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"数量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input-number',{attrs:{\"min\":1,\"size\":\"small\",\"label\":\"描述文字\"},model:{value:(scope.row.quantity),callback:function ($$v) {_vm.$set(scope.row, \"quantity\", $$v)},expression:\"scope.row.quantity\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.makeOrderFn(scope.row)}}},[_vm._v(\"直接购买\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.addShoppingCart(scope.row)}}},[_vm._v(\"加入购物车\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.productList.length},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-7788ce65\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/petStore/products.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}