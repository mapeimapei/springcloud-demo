{"version":3,"sources":["webpack:///src/views/petStore/orders.vue","webpack:///./src/views/petStore/orders.vue","webpack:///./src/views/petStore/orders.vue?5406"],"names":["orders","name","data","orderList","currentPage","pageSize","computed","extends_default","Object","vuex_esm","orderList2","start","this","end","slice","filters","statusFliter","val","methods","deleteOrder","id","_this","$confirm","confirmButtonText","cancelButtonText","type","then","obj","userid","user","user_id","orderid","loadingMask","$loading","lock","background","$axios","post","stringify_default","close","resultCode","getOrderList","$notify","message","catch","err","$message","goOrdersDetails","$router","push","path","query","_this2","apiUrl","get","result","mounted","created","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","border","prop","width","label","_v","scopedSlots","_u","key","fn","scope","_s","_f","row","status","on","click","$event","current-page","page-size","layout","total","length","update:currentPage","update:current-page","__webpack_exports__"],"mappings":"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","file":"vue/js/2.394b8538b162472eb9ec.js","sourcesContent":["<template>\r\n\t<div class=\"articleBox fx-f1\">\r\n\r\n\t\t<el-table\r\n      class=\"articleList\"\r\n      :data=\"orderList2\"\r\n      border>\r\n      <el-table-column\r\n        prop=\"orderid\"\r\n        width=\"360\"\r\n        label=\"订单ID\">\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        prop=\"amount\"\r\n        label=\"总价(￥)\">\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        prop=\"orderdate\"\r\n        label=\"订单日期\">\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        prop=\"status\"\r\n        label=\"状态\">\r\n       <template slot-scope=\"scope\">\r\n          {{scope.row.status | statusFliter}}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" @click=\"goOrdersDetails(scope.row.orderid)\">查看</el-button>\r\n          <el-button type=\"text\" @click=\"deleteOrder(scope.row.orderid)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n    \t:current-page.sync=\"currentPage\"\r\n    \t:page-size=\"pageSize\"\r\n    \tlayout=\"total, prev, pager, next\"\r\n    \t:total=\"orderList.length\">\r\n    </el-pagination>\r\n\r\n\t</div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name:\"orders\",\r\n  data () {\r\n    return {\r\n       orderList:[],\r\n       currentPage:1,\r\n       pageSize:5,\r\n    }\r\n  },\r\n  computed:{\r\n    ...mapState(\r\n          ['user']\r\n     ),\r\n\r\n     //分页\r\n     orderList2(){\r\n       let start = (this.currentPage-1)*this.pageSize\r\n       let end =this.currentPage*this.pageSize\r\n       return this.orderList.slice(start,end)\r\n     },\r\n\r\n  },\r\n\r\n  filters:{\r\n    statusFliter(val){\r\n      if(val == 0){\r\n        return \"未支付\"\r\n      }else if(val == 1){\r\n        return \"已完成\"\r\n      }else if(val == 2){\r\n        return \"已取消\"\r\n      }\r\n    }\r\n  },\r\n\r\n  methods:{\r\n\r\n    deleteOrder(id){\r\n      \r\n        this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n      \r\n          let obj = {\r\n            \"userid\":this.user.user_id,\r\n            \"orderid\":id\r\n          }\r\n          let apiUrl = \"shop/order/deleteOrder\"\r\n          let loadingMask = this.$loading({\r\n            lock: true,\r\n            background: 'rgba(0, 0, 0, 0.5)'\r\n          });\r\n          this.$axios.post(apiUrl, JSON.stringify(obj)).then((data) => {\r\n            loadingMask.close();\r\n            if(!!data && data.resultCode ===\"20000\"){\r\n              this.getOrderList()\r\n              this.$notify({\r\n                message: '订单删除成功。',\r\n                type: 'success'\r\n              })\r\n            }else{\r\n              this.$notify({\r\n                message: '订单删除失败。',\r\n                type: 'warning'\r\n              });\r\n            }\r\n          }).catch((err) => {\r\n            loadingMask.close();\r\n            this.$notify({\r\n              message: '订单删除接口报错。',\r\n              type: 'warning'\r\n            });\r\n          });\r\n          \r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });          \r\n        });\r\n      \r\n          \r\n    },\r\n\r\n\r\n    goOrdersDetails(id){\r\n      this.$router.push({path: 'ordersDetails', query:{orderid: id}})\r\n    },\r\n\r\n    getOrderList(){\r\n      let apiUrl = \"shop/order/getOrderList/\" + this.user.user_id\r\n      let loadingMask = this.$loading({\r\n        lock: true,\r\n        background: 'rgba(0, 0, 0, 0.5)'\r\n      });\r\n      this.$axios.get(apiUrl).then((data) => {\r\n        loadingMask.close();\r\n        if(!!data && data.resultCode ===\"20000\"){\r\n            this.orderList= data.result\r\n        }else{\r\n          this.$notify({\r\n            message: '获取订单列表失败。',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      }).catch((err) => {\r\n        loadingMask.close();\r\n        this.$notify({\r\n          message: '订单列表接口报错。',\r\n          type: 'warning'\r\n        });\r\n      });\r\n    },\r\n\r\n  },\r\n\r\n  mounted(){\r\n  },\r\n  created(){\r\n    this.getOrderList()\r\n\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/petStore/orders.vue","/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./orders.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./orders.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ec0ef5de\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./orders.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/petStore/orders.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"articleBox fx-f1\"},[_c('el-table',{staticClass:\"articleList\",attrs:{\"data\":_vm.orderList2,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"orderid\",\"width\":\"360\",\"label\":\"订单ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"amount\",\"label\":\"总价(￥)\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"orderdate\",\"label\":\"订单日期\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(_vm._f(\"statusFliter\")(scope.row.status))+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.goOrdersDetails(scope.row.orderid)}}},[_vm._v(\"查看\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteOrder(scope.row.orderid)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.orderList.length},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-ec0ef5de\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/petStore/orders.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}