{"version":3,"sources":["webpack:///src/views/login.vue","webpack:///./src/views/login.vue","webpack:///./src/views/login.vue?e032"],"names":["login","name","components","data","loginData","account","passwd","rules","required","message","trigger","computed","extends_default","Object","vuex_esm","watch","methods","loginFn","_this","this","obj","loadingMask","$loading","lock","background","$axios","post","then","close","resultCode","setUser","result","setToken","token","localStorage","setItem","stringify_default","redirect","decodeURIComponent","$route","query","$router","push","path","$notify","type","catch","err","submitForm","_this2","$refs","validate","valid","console","log","resetForm","resetFields","mounted","created","beforDestroy","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","status-icon","label-width","label-position","label","prop","value","callback","$$v","$set","expression","nativeOn","keyup","$event","indexOf","_k","keyCode","key","on","click","__webpack_exports__"],"mappings":"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","file":"vue/js/4.dc4034f2fda4a691e6fa.js","sourcesContent":["<template>\r\n\t<div class=\"loginBox\">\r\n\t\t<div class=\"pt60\">\r\n\t\t\t<div class=\"tx\">欢迎登录</div>\r\n\t\t\t<el-form :model=\"loginData\" status-icon :rules=\"rules\" ref=\"loginForm\" label-width=\"70px\" label-position=\"top\" class=\"loginData\">\r\n\t\t\t  <el-form-item label=\"账号\" prop=\"account\">\r\n\t\t\t\t<el-input type=\"text\" v-model=\"loginData.account\"></el-input>\r\n\t\t\t  </el-form-item>\r\n\t\t\t  <el-form-item label=\"输入密码\" prop=\"passwd\">\r\n\t\t\t\t<el-input type=\"password\" @keyup.enter.native=\"submitForm\" v-model=\"loginData.passwd\"></el-input>\r\n\t\t\t  </el-form-item>\r\n\t\t\t  <el-form-item>\r\n\t\t\t\t<el-button @click=\"resetForm\">重 置</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm\">登 录</el-button>\r\n\t\t\t  </el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState,mapGetters,mapActions ,mapMutations } from 'vuex'\r\nexport default {\r\n  name: 'login',\r\n  components: {},\r\n  data(){\r\n      return {\r\n        loginData: {\r\n          account: '9725029@qq.com',\r\n          passwd: '123456',\r\n        },\r\n        rules: {\r\n          account: [\r\n            { required: true, message: '请输入正确的账号或名称', trigger: 'blur' }\r\n          ],\r\n          passwd: [\r\n            {required: true, message: '密码不能为空', trigger: 'blur' },\r\n          ]\r\n        }\r\n   }\r\n  },\r\n  computed:{\r\n    ...mapState(\r\n          ['user','token']\r\n     ),\r\n  },\r\n  watch:{},\r\n  methods:{\r\n    //mutation 的辅助方法\r\n    ...mapMutations(['setUser','setToken']),\r\n\r\n    loginFn(){\r\n      let obj = {...this.loginData}\r\n      let apiUrl = \"/user/login\"\r\n      let loadingMask = this.$loading({\r\n        lock: true,\r\n        background: 'rgba(0, 0, 0, 0.5)'\r\n      });\r\n      this.$axios.post(apiUrl, obj).then((data) => {\r\n        loadingMask.close();\r\n        if(!!data && data.resultCode ===\"20000\"){\r\n          this.setUser(data.result)\r\n          this.setToken(data.result.token)\r\n          localStorage.setItem(\"user\",JSON.stringify(data.result))\r\n          localStorage.setItem(\"token\",data.result.token)\r\n          let redirect = decodeURIComponent(this.$route.query.redirect || '/blog/post');\r\n          this.$router.push({\r\n            path: redirect\r\n          })\r\n          this.$notify({\r\n            message: '登录成功。',\r\n            type: 'success'\r\n          })\r\n        }else{\r\n          this.$notify({\r\n            message: '账号或密码错误。',\r\n            type: 'warning'\r\n          });\r\n        }\r\n      }).catch((err) => {\r\n        loadingMask.close();\r\n        this.$notify({\r\n          message: '登录接口报错。',\r\n          type: 'warning'\r\n        });\r\n      });\r\n    },\r\n\r\n\t  submitForm() {\r\n\t      this.$refs[\"loginForm\"].validate((valid) => {\r\n\t        if (valid) {\r\n\t          //alert('submit!');\r\n            this.loginFn()\r\n\t        } else {\r\n\t          console.log('error submit!!');\r\n\t          return false;\r\n\t        }\r\n\t      });\r\n\t    },\r\n\t    resetForm() {\r\n\t      this.$refs[\"loginForm\"].resetFields();\r\n\t    }\r\n  },\r\n\r\n  mounted(){\r\n\r\n  },\r\n\r\n  created(){\r\n\r\n  },\r\n\r\n  beforDestroy(){\r\n\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/login.vue","/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-241cd494\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loginBox\"},[_c('div',{staticClass:\"pt60\"},[_c('div',{staticClass:\"tx\"},[_vm._v(\"欢迎登录\")]),_vm._v(\" \"),_c('el-form',{ref:\"loginForm\",staticClass:\"loginData\",attrs:{\"model\":_vm.loginData,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"70px\",\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"account\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.loginData.account),callback:function ($$v) {_vm.$set(_vm.loginData, \"account\", $$v)},expression:\"loginData.account\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"输入密码\",\"prop\":\"passwd\"}},[_c('el-input',{attrs:{\"type\":\"password\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitForm($event)}},model:{value:(_vm.loginData.passwd),callback:function ($$v) {_vm.$set(_vm.loginData, \"passwd\", $$v)},expression:\"loginData.passwd\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.resetForm}},[_vm._v(\"重 置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"登 录\")])],1)],1)],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-241cd494\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}